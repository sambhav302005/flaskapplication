<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Problems</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .filter-section {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    .filter-section input, .filter-section select {
        padding: 8px;
        font-size: 14px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }

    .problem-card {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        border: 1px solid #e1e1e1;
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
    }

    .problem-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .problem-card h3 {
        margin: 0 0 8px 0;
        color: #2b7cff;
    }

    .problem-card p {
        margin: 4px 0;
        font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>All Problems</h1>

    <!-- Filters -->
    <div class="filter-section">
      <input type="text" id="searchInput" placeholder="Search by problem name..." onkeyup="filterProblems()">
      <select id="difficultyFilter" onchange="filterProblems()">
        <option value="">All Difficulties</option>
        <option value="Easy">Easy</option>
        <option value="Medium">Medium</option>
        <option value="Hard">Hard</option>
      </select>
      <select id="categoryFilter" onchange="filterProblems()">
        <option value="">All Categories</option>
        {% set categories = problems.values() | map(attribute='category') | list | unique %}
        {% for cat in categories %}
          <option value="{{ cat }}">{{ cat }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Problems List -->
    <div id="problemsList">
      {% for name, details in problems.items() %}
      <div class="problem-card">
        <h3>{{ name }}</h3>
        <p><strong>Difficulty:</strong> {{ details.difficulty }}</p>
        <p><strong>Category:</strong> {{ details.category }}</p>
        <p><strong>Description:</strong> {{ details.description[:100] }}{% if details.description|length > 100 %}...{% endif %}</p>
        <a href="/" class="back-btn" style="margin-top:10px; display:inline-block;">Solve Problem</a>
      </div>
      {% endfor %}
    </div>

    <a href="/" class="back-btn">ðŸ”™ Back to Dashboard</a>
  </div>

  <script>
    function filterProblems() {
      const searchValue = document.getElementById('searchInput').value.toLowerCase();
      const difficulty = document.getElementById('difficultyFilter').value;
      const category = document.getElementById('categoryFilter').value;

      const cards = document.querySelectorAll('.problem-card');

      cards.forEach(card => {
        const name = card.querySelector('h3').innerText.toLowerCase();
        const cardDifficulty = card.querySelector('p strong:nth-child(1)').nextSibling.textContent.trim();
        const cardCategory = card.querySelector('p strong:nth-child(2)').nextSibling.textContent.trim();

        const matchesSearch = name.includes(searchValue);
        const matchesDifficulty = difficulty === '' || cardDifficulty === difficulty;
        const matchesCategory = category === '' || cardCategory === category;

        if (matchesSearch && matchesDifficulty && matchesCategory) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }
  </script>
</body>
</html>
